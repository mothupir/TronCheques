<div class="wrapper">
    <div class="content">
        <p-card header="Deposit" class="deposit">
            <div class="details">
                <div class="input">
                    <label class="label">Wallet Address</label>
                    <p-inputGroup>
                        <input type="text" id="walletAddress" [(ngModel)]="walletAddress" pInputText placeholder="Wallet Address" />
                        <button type="button" (click)="useConnectedWallet()" pButton icon="pi pi-wallet" class="p-button-secondary" pTooltip="Click to paste connected wallet address"></button>
                    </p-inputGroup>
                </div>
                
                <div class="input">
                    <label class="label">Amount</label>
                    <p-inputGroup>
                        <p-inputNumber id="amount" [(ngModel)]="amount" inputId="minmax" [min]="0"[max]="99999999" mode="decimal" placeholder="Withdrawal Code"></p-inputNumber>
                        <p-inputGroupAddon>
                            <label for="sun">SUN</label>
                            <p-radioButton name="sun" value="sun" [(ngModel)]="currency" inputId="sun"></p-radioButton>
                        </p-inputGroupAddon>
                        <p-inputGroupAddon>
                            <label for="trx">TRX</label>
                            <p-radioButton name="trx" value="trx" [(ngModel)]="currency" inputId="trx"></p-radioButton>
                        </p-inputGroupAddon>
                    </p-inputGroup>
                </div>
    
                <div class="input">
                    <label class="label">Reference/Description</label>
                    <input type="text" id="ref" [(ngModel)]="description" pInputText placeholder="Reference/Description" />
                </div>

                <div class="submit">
                    <button pButton (click)="clear()" class="p-button-warning p-button-raised p-button-text p-button-sm btn-submit" label="Clear"></button>
                    <button pButton (click)="confirm()" class="p-button-success p-button-raised p-button-outlined p-button-sm btn-submit" label="Confirm"></button>
                </div>
            </div>
        </p-card>

        <div class="info">
            <div class="title2">Instructions</div>
            <div class="steps">
                <div class="step">
                    <span>Step 1 - Wallet Address</span>
                    <p class="m-0">
                        Paste the wallet address you are depositing from. Or click the wallet icon to paste the wallet address you are connected to.
                    </p>
                </div>
                <div class="step">
                    <span>Step 2 - Amount/Value</span>
                    <p class="m-0">
                        Enter the amount/value you want to deposit. Choose the currency you wanna deposit in, sun/trx. Take note of the minimun/maximum amount in the fees section below.
                    </p>
                </div>
                <div class="step">
                    <span>Step 3 - Reference</span>
                    <p class="m-0">
                        Type in your reference number.
                    </p>
                </div>
                <div class="step">
                    <span>Step 4 - Confirm</span>
                    <p class="m-0">
                        Click confirm and then go to your TronLink wallet to sign the transaction. The you'll get a popup with withdral details. Copy them and share with the person who will withdraw the amount.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div>
        <div class="separator"></div>
        <div class="title">
            <div></div>
            <div>Transactional Fees</div>
            <div></div>
        </div>
    </div>

    <p-scrollPanel [style]="{ width: '100%', height: '50vh' }">
        <div class="card card-disabled" *ngFor="let fee of fees">
            <div class="detail">
                <div class="name">From</div>
                <div class="separator"></div>
                <div class="value">{{fee.min}} TRX</div>
            </div>
            <div class="detail">
                <div class="name">To</div>
                <div class="separator"></div>
                <div class="value">{{fee.max}} TRX</div>
            </div>
            <div class="detail">
                <div class="name">Deposit</div>
                <div class="separator"></div>
                <div class="value">{{fee.deposit}} TRX</div>
            </div>
            <div class="detail">
                <div class="name">Reversal</div>
                <div class="separator"></div>
                <div class="value">{{fee.reversal}} TRX</div>
            </div>
        </div>
    </p-scrollPanel>

    <div class="minmax">
        <div>Maximum Deposit - {{fees[0].min}}</div>
        <div>Minimum Deposit - {{fees[fees.length - 1].max}}</div>
    </div>
</div>

<p-dialog header="Withdrawal Details" [(visible)]="showDialog" [style]="{width: '60vw'}">
    <div class="row">
        <div class="desc">Deposit Id</div>
        <div class="value">{{deposit.index}}</div>
    </div>
    <div class="separator"></div>
    <div class="row">
        <div class="desc">Withdrawal Code</div>
        <div class="value">{{withdrawalCode}}</div>
    </div>
    <div class="separator"></div>
    <div class="row">
        <div class="desc">Amount ({{currency}})</div>
        <div class="value">{{amount}}</div>
    </div>
    <div class="separator"></div>
    <div class="message">Keep the information above secret. Only share with the person who the payment is intended for.</div>
    <div class="separator"></div>
    <div class="footer">
        <button pButton label="Close" (click)="showDialog = false" class="p-button-sm p-button-text p-button-warning p-button-raised"></button>
    </div>
</p-dialog>