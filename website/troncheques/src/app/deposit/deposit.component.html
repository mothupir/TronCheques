<div class="wrapper">
    <div class="content">
        <p-card header="Deposit" class="deposit">
            <div class="details">
                <div class="input">
                    <label class="label">Amount</label>
                    <p-inputGroup>
                        <p-inputNumber id="amount" [(ngModel)]="amount" inputId="minmax" [min]="0" mode="decimal" placeholder="Amount"></p-inputNumber>
                        <button pButton label="TRX" class="p-button-outlined p-button-secondary" disabled></button>
                    </p-inputGroup>
                </div>
    
                <div class="input">
                    <label class="label">Reference/Description</label>
                    <input type="text" id="ref" [(ngModel)]="description" pInputText placeholder="Reference/Description" />
                </div>

                <div class="submit">
                    <button pButton (click)="clear()" class="p-button-warning p-button-raised p-button-text p-button-sm btn-submit" label="Clear"></button>
                    <button pButton (click)="confirm()" class="p-button-success p-button-raised p-button-outlined p-button-sm btn-submit" label="Confirm"></button>
                </div>
            </div>
        </p-card>

        <div class="info">
            <div class="title2">Instructions</div>
            <div class="steps">
                <div class="step">
                    <span>Step 1 - Wallet Address</span>
                    <p class="m-0">
                        Paste the wallet address you are depositing from. Or click the wallet icon to paste the wallet address you are connected to.
                    </p>
                </div>
                <div class="step">
                    <span>Step 2 - Amount/Value</span>
                    <p class="m-0">
                        Enter the amount/value you want to deposit. Choose the currency you wanna deposit in, sun/trx. Take note of the minimun/maximum fees in the "Transactional Fees" section below.
                    </p>
                </div>
                <div class="step">
                    <span>Step 3 - Reference</span>
                    <p class="m-0">
                        Type in your reference number.
                    </p>
                </div>
                <div class="step">
                    <span>Step 4 - Confirm</span>
                    <p class="m-0">
                        Click confirm and then go to your TronLink wallet to sign the transaction. The you'll get a popup with withdral details. Copy them and share with the person who will withdraw the amount.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div>
        <div class="separator"></div>
        <div class="title">
            <div>Transactional Fees</div>
            <button pButton (click)="getTransactionalFees()" label="Refresh" icon="pi pi-refresh" class="p-button-sm p-button-raised p-button-info p-button-text"></button>
        </div>
    </div>

    <p-scrollPanel [style]="{ width: '100%', height: '50vh' }">
        <div class="card card-disabled" *ngFor="let fee of fees">
            <div class="detail">
                <div class="name">From</div>
                <div class="separator"></div>
                <div class="value">{{fee.min}} TRX</div>
            </div>
            <div class="detail">
                <div class="name">To</div>
                <div class="separator"></div>
                <div class="value">{{fee.max}} TRX</div>
            </div>
            <div class="detail">
                <div class="name">Deposit</div>
                <div class="separator"></div>
                <div class="value">{{fee.deposit}} TRX</div>
            </div>
            <div class="detail">
                <div class="name">Reversal</div>
                <div class="separator"></div>
                <div class="value">{{fee.reversal}} TRX</div>
            </div>
        </div>
    </p-scrollPanel>

    <div class="minmax text-200">
        <div>Mininum Deposit Allowed - {{min}} trx</div>
        <div>Maximum Deposit Fee - {{max}} trx</div>
    </div>
</div>

<p-dialog header="Withdrawal Details" [draggable]="false" [modal]="true" [(visible)]="showDialog" [style]="{width: '60vw'}">
    <div class="detail">
        <div class="name">Deposit Id</div>
        <div class="value">{{deposit.index}}</div>
    </div>
    <div class="separator"></div>
    <div class="row">
        <div class="name">Withdrawal Code</div>
        <div class="value">{{withdrawalCode}}</div>
    </div>
    <div class="separator"></div>
    <div class="row">
        <div class="name">Amount ({{currency}})</div>
        <div class="value">{{amount}}</div>
    </div>
    <div class="separator"></div>
    <div class="message">Keep the information above secret. Only share with the person who the payment is intended for.</div>
    <div class="separator"></div>
    <div class="footer">
        <button pButton label="Close" (click)="showDialog = false" class="p-button-sm p-button-text p-button-warning p-button-raised"></button>
    </div>
</p-dialog>

<p-dialog header="Sign Transaction" [draggable]="false" [modal]="true" [(visible)]="showConfirmDialog" [style]="{width: '500px'}">
    <div class="detail mb-3">
        <label class="label">Sign With Wallet</label>
        <div class="row">
            <p-dropdown [options]="walletList" [(ngModel)]="wallet" optionLabel="name" placeholder="Select Wallet" autoWidth="false" [style]="{width: '380px'}"></p-dropdown>
            <button pButton (click)="depositWithWallet()" label="Sign" icon="pi pi-wallet" iconPos="right" class="p-button-help p-button-sm p-button-outlined"></button>
        </div>
        <div class="or">OR</div>
        <label class="label">Sign With Private Key</label>
        <div class="row">
            <input pInputText placeholder="Private Key" style="width: 380px;">
            <button pButton (click)="depositWithPrivateKey()" label="Sign" icon="pi pi-user-edit" iconPos="right" class="p-button-help p-button-sm p-button-outlined"></button>
        </div>
    </div>

    <div class="separator"></div>

    <div class="card card-warning mt-2 font-medium text-primary">
        <div class="detail">
            <div class="name">Total Amount</div>
            <div class="separator"></div>
            <div class="value">{{amount + getFee()}} TRX</div>
        </div>
    </div>

    <div class="card card-disabled mt-2">
        <div class="detail">
            <div class="name">Depost Amount</div>
            <div class="separator"></div>
            <div class="value">{{amount}} TRX</div>
        </div>
    </div>

    <div class="card card-disabled mt-2">
        <div class="detail">
            <div class="name">Fee Charged</div>
            <div class="separator"></div>
            <div class="value">{{getFee()}} TRX</div>
        </div>
    </div>

    <div class="card card-disabled mt-2">
        <div class="detail">
            <div class="name">Reference</div>
            <div class="separator"></div>
            <div class="value">{{description || "None"}}</div>
        </div>
    </div>
</p-dialog>